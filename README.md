# DO7_Docker-Compose

Проект по развертыванию микросервисов на локальной и виртуальных машинах (docker, docker compose, vagrant)

**Последовательность действий при выполнении проекта описана в ```src/REPORT.md```. Для запуска проекта требуются Docker, Vagrant, VirtualBox. Для проверки работоспособности микросервисного приложения нужен Postman, тесты для которого находятся по пути ```src/application_tests.postman_collection.json```.**

## TASK 1

Файлы по заданию находятся в ```src/task1```.

В этой задаче нужно было развернуть микросервисное приложение. Исходный код был взят из материалов проекта. В директории ```src/task1/services``` находятся отдельные папки с каждым сервисом и его зависимостями.

Для запуска из папки task1:

```bash
docker compose up --build
```

Дальше проверяется работа микросервисов с помощью Postman.


## TASK 2

Файлы по заданию находятся в ```src/task2```.

В данной задаче было произведено развертывание микросервисного приложения на виртуальной машине, созданной при помощи Vagrant. В папке находятся Vagrantfile и директория services с отдельными папками для каждого сервиса.

Для запуска из task2:

```bash
vagrant up
```

После создания машины автоматически начнется загрузка необходимых пакетов и развертывание микросервисного приложения.

После того, как приложение забилдится, можно прогнать тесты Postman.


## TASK 3

Файлы по заданию находятся в ```src/task3```. 

В этой задаче нужно было создать 3 машины - manager01, worker01, worker02 при помощи Vagrant и подключить их к Docker Swarm.

Для последловательного запуска машин был написан скрипт ```vagrant_up_sh```.

Запуск машин:

```bash
./vagrant_up.sh
```

Vagrantfile запускает ```base_script.sh``` на всех машинах, который стартует дополнительные скрипты, назначенные для разных машин в зависимости от их роли для подгрузки необходимых пакетов, открытия портов, выделения swap и подключения к Docker Swarm.

В результате выполнения у нас появляются 3 машины - один manager, управляющий развертыванием сервисов, и две worker ноды.

Работоспособность также проверяется через тесты Postman.
